(()=>{var i="theme";var r=class{appRoot=document.getElementById("app");themeSwitcherEl=document.querySelector(".theme-switcher");moonIconEl=document.getElementById("moon-icon");sunIconEl=document.getElementById("sun-icon");html=document.documentElement;theme;DOMParser=new DOMParser;constructor(){this.initTheme(),this.initRouting()}initTheme=()=>{this.theme=localStorage.getItem(i)??"dark",this.themeSwitcherEl.addEventListener("click",this.handleTheme),this.renderIcon(this.theme),this.html.setAttribute(`data-${i}`,this.theme)};initRouting=()=>{this.attachHeaderLinkListeners(),this.attachContentLinkListeners(),self.addEventListener("popstate",this.handlePopstate)};renderIcon(t){t==="dark"&&(this.themeSwitcherEl.innerHTML=this.moonIconEl.innerHTML),t==="light"&&(this.themeSwitcherEl.innerHTML=this.sunIconEl.innerHTML)}handleTheme=()=>{let n=this.html.getAttribute(`data-${i}`)==="dark"?"light":"dark";this.html.setAttribute(`data-${i}`,n),localStorage.setItem(i,n),this.renderIcon(n)};attachContentLinkListeners=()=>{let t=document.querySelectorAll("main a");Array.from(t).filter(e=>e.getAttribute("href")?.startsWith("/")).forEach(e=>e.addEventListener("click",this.handleLink))};attachHeaderLinkListeners=()=>{let t=document.querySelectorAll("header a");Array.from(t).filter(e=>e.getAttribute("href")?.startsWith("/")).forEach(e=>e.addEventListener("click",this.handleLink))};handlePopstate=async()=>{let t=location.pathname,n=await this.fetchPageContent(t),e=this.parsePageContent(n),s=document.querySelector("main");this.appRoot.replaceChild(e,s),this.attachContentLinkListeners()};handleLink=async t=>{t.preventDefault();let e=t.currentTarget.getAttribute("href")??"";if(e===location.pathname)return;let s=await this.fetchPageContent(e),o=this.parsePageContent(s),a=document.querySelector("main");this.appRoot.replaceChild(o,a),history.pushState({},"",e),this.attachContentLinkListeners()};fetchPageContent=async t=>await(await fetch(`${t}?clientside=true`)).text();parsePageContent=t=>this.DOMParser.parseFromString(t,"text/html").querySelector("main")};new r;})();
