(()=>{var a="theme";var i=class{themeSwitcherEl=document.querySelector(".theme-switcher");moonIconEl=document.getElementById("moon-icon");sunIconEl=document.getElementById("sun-icon");appRoot=document.getElementById("app");html=document.documentElement;theme;DOMParser=new DOMParser;constructor(){this.initTheme(),this.initRouting()}initTheme=()=>{this.theme=localStorage.getItem(a)??"dark",this.themeSwitcherEl.addEventListener("click",this.handleTheme),this.renderIcon(this.theme),this.html.setAttribute(`data-${a}`,this.theme)};initRouting=()=>{this.attachHeaderLinkListeners(),this.attachContentLinkListeners(),self.addEventListener("popstate",this.handlePopstate)};renderIcon(t){t==="dark"&&(this.themeSwitcherEl.innerHTML=this.moonIconEl.innerHTML),t==="light"&&(this.themeSwitcherEl.innerHTML=this.sunIconEl.innerHTML)}handleTheme=()=>{let e=this.html.getAttribute(`data-${a}`)==="dark"?"light":"dark";this.html.setAttribute(`data-${a}`,e),localStorage.setItem(a,e),this.renderIcon(e)};attachContentLinkListeners=()=>{let t=document.querySelectorAll("main a");Array.from(t).filter(n=>n.getAttribute("href")?.startsWith("/")).forEach(n=>n.addEventListener("click",this.handleLink))};attachHeaderLinkListeners=()=>{let t=document.querySelectorAll("header a");Array.from(t).filter(n=>n.getAttribute("href")?.startsWith("/")).forEach(n=>n.addEventListener("click",this.handleLink))};handlePopstate=async()=>{let t=location.pathname;this.updateNavLink(document.querySelector(`nav a[href="${t}"]`));let e=await this.fetchPageContent(t),n=this.parsePageContent(e),r=document.querySelector("main");this.appRoot.replaceChild(n,r),this.attachContentLinkListeners()};handleLink=async t=>{t.preventDefault();let e=t.currentTarget,n=e.getAttribute("href")??"";if(n===location.pathname)return;this.updateNavLink(n==="/"?document.querySelector("nav a"):e);let r=await this.fetchPageContent(n),s=this.parsePageContent(r),o=document.querySelector("main");this.appRoot.replaceChild(s,o),history.pushState({},"",n),this.attachContentLinkListeners()};updateNavLink=t=>{let e=document.querySelector('header nav a[data-active="true"]');e&&(e.classList.remove("text-main","text-semibold"),e.classList.add("text-secondary"),e.removeAttribute("data-active")),t&&t.parentElement?.tagName==="NAV"&&(t.classList.remove("text-secondary"),t.classList.add("text-main","text-semibold"),t.setAttribute("data-active","true"))};fetchPageContent=async t=>await(await fetch(`${t}?clientside=true`)).text();parsePageContent=t=>this.DOMParser.parseFromString(t,"text/html").querySelector("main")};new i;})();
